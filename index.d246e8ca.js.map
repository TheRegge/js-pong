{"mappings":"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","sources":["src/Ball.js","src/Paddle.js","src/Sound.js","src/Game.js","src/index.js"],"sourcesContent":["const INITIAL_VELOCITY = 0.025\nconst VELOCITY_INCREASE = 0.00001\n\nexport default class Ball {\n  constructor(ballElem) {\n    this.ballElem = ballElem\n    this.beep1 = [0.1, 250]\n    this.beep2 = [0.1, 550]\n    this.reset()\n  }\n\n  get x() {\n    return parseFloat(getComputedStyle(this.ballElem).getPropertyValue('--x'))\n  }\n\n  set x(value) {\n    this.ballElem.style.setProperty('--x', value)\n  }\n\n  get y() {\n    return parseFloat(getComputedStyle(this.ballElem).getPropertyValue('--y'))\n  }\n\n  set y(value) {\n    this.ballElem.style.setProperty('--y', value)\n  }\n\n  rect() {\n    return this.ballElem.getBoundingClientRect()\n  }\n\n  reset() {\n    this.x = 50\n    this.y = 50\n    this.direction = { x: 0 }\n    while (\n      Math.abs(this.direction.x) <= 0.2 ||\n      Math.abs(this.direction.x) >= 0.9\n    ) {\n      const heading = randomNumberBetween(0, 2 * Math.PI)\n      this.direction = { x: Math.cos(heading), y: Math.sin(heading) }\n    }\n    this.velocity = INITIAL_VELOCITY\n  }\n\n  update(delta, paddleRects) {\n    this.x += this.direction.x * this.velocity * delta\n    this.y += this.direction.y * this.velocity * delta\n    this.velocity += VELOCITY_INCREASE * delta\n    const rect = this.rect()\n\n    if (paddleRects.some((r) => isCollision(r, rect))) {\n      this.sound?.beep(...this.beep2)\n      this.direction.x *= -1\n      this.direction.y += Math.sin(Math.random() * 2 * Math.PI)\n    }\n    if (rect.bottom >= window.innerHeight || rect.top <= 0) {\n      this.sound?.beep(...this.beep1)\n      this.direction.y *= -1\n    }\n  }\n}\n\nfunction randomNumberBetween(min, max) {\n  return Math.random() * (max - min) + min\n}\n\nfunction isCollision(rect1, rect2) {\n  return (\n    rect1.left <= rect2.right &&\n    rect1.right >= rect2.left &&\n    rect1.top <= rect2.bottom &&\n    rect1.bottom >= rect2.top\n  )\n}\n","const SPEED = 0.02\n\nexport default class Paddle {\n  constructor(paddleElem) {\n    this.paddleElem = paddleElem\n    this.reset()\n  }\n\n  get position() {\n    return parseFloat(\n      getComputedStyle(this.paddleElem).getPropertyValue('--position')\n    )\n  }\n\n  set position(value) {\n    this.paddleElem.style.setProperty('--position', value)\n  }\n\n  rect() {\n    return this.paddleElem.getBoundingClientRect()\n  }\n\n  reset() {\n    this.position = 50\n  }\n\n  update(delta, ballHeight) {\n    this.position += SPEED * delta * (ballHeight - this.position)\n  }\n}\n","export default class Sound {\n  constructor(audioContext) {\n    this.context = audioContext\n  }\n\n  beep(duration, frequency) {\n    const os = this.context.createOscillator()\n    os.type = 'sine'\n    os.frequency.value = frequency\n    const g = this.context.createGain()\n    os.connect(g)\n    g.connect(this.context.destination)\n    os.start(0)\n    g.gain.exponentialRampToValueAtTime(\n      0.00001,\n      this.context.currentTime + duration\n    )\n  }\n}\n","import Ball from './Ball.js'\nimport Paddle from './Paddle.js'\nimport Sound from './Sound.js'\n\nconst status = {\n  PAUSED: -1,\n  PLAYING: 1,\n}\n\nexport default class Game {\n  constructor() {\n    this.ball = new Ball(document.getElementById('ball'))\n    this.playerPaddle = new Paddle(document.getElementById('player-paddle'))\n    this.computerPaddle = new Paddle(document.getElementById('computer-paddle'))\n    this.playerScoreElem = document.getElementById('player-score')\n    this.computerScoreElem = document.getElementById('computer-score')\n    this.startButtonElem = document.getElementById('start-button')\n    this.status = status.PAUSED\n    this.inputScreenElem = document.getElementById('input-screen')\n    this.lastTime = null\n\n    this.startButtonElem.addEventListener('click', () => {\n      this.start()\n    })\n\n    document.addEventListener('mousemove', (e) => {\n      if (this.status === status.PAUSED) return\n      this.playerPaddle.position = (e.y / window.innerHeight) * 100\n    })\n  }\n\n  start = () => {\n    console.log('start')\n    this.audioContext = new AudioContext()\n    this.startButtonElem.remove()\n    this.status = status.PLAYING\n    this.ball.sound = new Sound(this.audioContext)\n    this.inputScreenElem.addEventListener('click', this.togglePause)\n    window.requestAnimationFrame(this.update)\n  }\n\n  togglePause = () => {\n    this.status *= -1\n  }\n\n  update = (time) => {\n    if (this.status === status.PAUSED) {\n      this.lastTime = null\n      window.requestAnimationFrame(this.update)\n      return\n    }\n    if (this.lastTime != null) {\n      const delta = time - this.lastTime\n\n      this.ball.update(delta, [\n        this.playerPaddle.rect(),\n        this.computerPaddle.rect(),\n      ])\n      this.computerPaddle.update(delta, this.ball.y)\n      const hue = parseFloat(\n        getComputedStyle(document.documentElement).getPropertyValue('--hue')\n      )\n      document.documentElement.style.setProperty('--hue', hue + delta * 0.005)\n\n      if (this.isLose()) this.handleLose()\n    }\n\n    if (this.status === status.PLAYING) {\n      this.lastTime = time\n      window.requestAnimationFrame(this.update)\n    }\n  }\n\n  isLose = () => {\n    const rect = this.ball.rect()\n    return rect.right >= window.innerWidth || rect.left <= 0\n  }\n\n  handleLose = () => {\n    const rect = this.ball.rect()\n    if (rect.right > window.innerWidth) {\n      this.playerScoreElem.textContent =\n        parseInt(this.playerScoreElem.textContent) + 1\n    } else {\n      this.computerScoreElem.textContent =\n        parseInt(this.computerScoreElem.textContent) + 1\n    }\n    this.ball.reset()\n    this.computerPaddle.reset()\n  }\n}\n","import Game from './Game.js'\n\nconst game = new Game()\n"],"names":["ballElem","this","beep1","beep2","reset","x","parseFloat","getComputedStyle","getPropertyValue","value","style","setProperty","y","value1","rect","getBoundingClientRect","direction","Math","abs","heading","min","max","PI","random","cos","sin","velocity","update","delta","paddleRects","some","r","$ae917f5a7ec87cbc$var$isCollision","rect2","rect1","left","right","top","bottom","sound","beep","window","innerHeight","paddleElem","position","ballHeight","audioContext","context","duration","frequency","os","createOscillator","type","g","createGain","connect","destination","start","gain","exponentialRampToValueAtTime","currentTime","$db2cc41e86813c5c$var$status","ball","$ae917f5a7ec87cbc$export$2e2bcd8739ae039","document","getElementById","playerPaddle","$b0dfa5ecebcc46dc$export$2e2bcd8739ae039","computerPaddle","playerScoreElem","computerScoreElem","startButtonElem","status","inputScreenElem","lastTime","addEventListener","e","console","log","AudioContext","remove","$fc117cb7d4fb455a$export$2e2bcd8739ae039","togglePause","requestAnimationFrame","time","hue","documentElement","isLose","handleLose","innerWidth","textContent","parseInt"],"version":3,"file":"index.d246e8ca.js.map"}