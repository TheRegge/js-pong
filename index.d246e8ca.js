class t{constructor(t){this.ballElem=t,this.beep1=[.1,250],this.beep2=[.1,550],this.reset()}get x(){return parseFloat(getComputedStyle(this.ballElem).getPropertyValue("--x"))}set x(t){this.ballElem.style.setProperty("--x",t)}get y(){return parseFloat(getComputedStyle(this.ballElem).getPropertyValue("--y"))}set y(t){this.ballElem.style.setProperty("--y",t)}rect(){return this.ballElem.getBoundingClientRect()}reset(){for(this.x=50,this.y=50,this.direction={x:0};Math.abs(this.direction.x)<=.2||Math.abs(this.direction.x)>=.9;){const s=(t=0,e=2*Math.PI,Math.random()*(e-t)+t);this.direction={x:Math.cos(s),y:Math.sin(s)}}var t,e;this.velocity=.025}update(t,e){this.x+=this.direction.x*this.velocity*t,this.y+=this.direction.y*this.velocity*t,this.velocity+=1e-5*t;const s=this.rect();e.some((t=>{return i=s,(e=t).left<=i.right&&e.right>=i.left&&e.top<=i.bottom&&e.bottom>=i.top;var e,i}))&&(this.sound?.beep(...this.beep2),this.direction.x*=-1,this.direction.y+=Math.sin(2*Math.random()*Math.PI)),(s.bottom>=window.innerHeight||s.top<=0)&&(this.sound?.beep(...this.beep1),this.direction.y*=-1)}}class e{constructor(t){this.paddleElem=t,this.reset()}get position(){return parseFloat(getComputedStyle(this.paddleElem).getPropertyValue("--position"))}set position(t){this.paddleElem.style.setProperty("--position",t)}rect(){return this.paddleElem.getBoundingClientRect()}reset(){this.position=50}update(t,e){this.position+=.02*t*(e-this.position)}}class s{constructor(t){this.context=t}beep(t,e){const s=this.context.createOscillator();s.type="sine",s.frequency.value=e;const i=this.context.createGain();s.connect(i),i.connect(this.context.destination),s.start(0),i.gain.exponentialRampToValueAtTime(1e-5,this.context.currentTime+t)}}const i=-1,o=1;new class{constructor(){this.ball=new t(document.getElementById("ball")),this.playerPaddle=new e(document.getElementById("player-paddle")),this.computerPaddle=new e(document.getElementById("computer-paddle")),this.playerScoreElem=document.getElementById("player-score"),this.computerScoreElem=document.getElementById("computer-score"),this.startButtonElem=document.getElementById("start-button"),this.status=i,this.inputScreenElem=document.getElementById("input-screen"),this.lastTime=null,this.startButtonElem.addEventListener("click",(()=>{this.start()})),document.addEventListener("mousemove",(t=>{this.status!==i&&(this.playerPaddle.position=t.y/window.innerHeight*100)}))}start=()=>{console.log("start"),this.audioContext=new AudioContext,this.startButtonElem.remove(),this.status=o,this.ball.sound=new s(this.audioContext),this.inputScreenElem.addEventListener("click",this.togglePause),window.requestAnimationFrame(this.update)};togglePause=()=>{this.status*=-1};update=t=>{if(this.status===i)return this.lastTime=null,void window.requestAnimationFrame(this.update);if(null!=this.lastTime){const e=t-this.lastTime;this.ball.update(e,[this.playerPaddle.rect(),this.computerPaddle.rect()]),this.computerPaddle.update(e,this.ball.y);const s=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--hue"));document.documentElement.style.setProperty("--hue",s+.005*e),this.isLose()&&this.handleLose()}this.status===o&&(this.lastTime=t,window.requestAnimationFrame(this.update))};isLose=()=>{const t=this.ball.rect();return t.right>=window.innerWidth||t.left<=0};handleLose=()=>{this.ball.rect().right>window.innerWidth?this.playerScoreElem.textContent=parseInt(this.playerScoreElem.textContent)+1:this.computerScoreElem.textContent=parseInt(this.computerScoreElem.textContent)+1,this.ball.reset(),this.computerPaddle.reset()}};
//# sourceMappingURL=index.d246e8ca.js.map
